(this["webpackJsonpreact-bootstrap-demo"]=this["webpackJsonpreact-bootstrap-demo"]||[]).push([[0],{77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(21),n=a.n(s),r=a(86),l=a(87),i=(a(62),a(1));var o=()=>Object(i.jsxs)(r.a,{bg:"light",expand:"lg",children:[Object(i.jsx)(r.a.Brand,{href:"#home",children:"My App"}),Object(i.jsx)(r.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(i.jsx)(r.a.Collapse,{id:"basic-navbar-nav",children:Object(i.jsxs)(l.a,{className:"me-auto",children:[Object(i.jsx)(l.a.Link,{href:"#home",children:"Home"}),Object(i.jsx)(l.a.Link,{href:"#features",children:"Features"}),Object(i.jsx)(l.a.Link,{href:"#pricing",children:"Pricing"})]})})]}),d=a(2),j=a(80),b=a(81),h=a(65),O=a(88),x=a(90),p=a(82),v=a(83),u=a(84),m=a(89),g=a(85),y=a(91),f=a(42),k=a(39);const C=[{value:"privateCar",label:"Private Car"},{value:"motorCycle",label:"Motorcycle"},{value:"HGV",label:"Heavy Goods Vehicle"},{value:"LGV",label:"Light Goods Vehicle"},{value:"coach",label:"Coach"}];function _(e){let{status:t}=e;return"OPEN"===t?Object(i.jsx)("span",{style:{color:"green",fontWeight:"bold"},children:"OPEN"}):"CLOSED"===t?Object(i.jsx)("span",{style:{background:"red",color:"white",padding:"2px 8px",borderRadius:4,fontWeight:"bold"},children:"CLOSED"}):Object(i.jsx)("span",{children:t})}function N(e){let{carparks:t,vehicleType:a,onShowMap:c,onToggleFavorite:s,favorites:n}=e;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"d-none d-md-block",children:Object(i.jsxs)(g.a,{striped:!0,hover:!0,responsive:!0,className:"mt-3 align-middle",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Address"}),Object(i.jsx)("th",{children:"Status"}),Object(i.jsx)("th",{children:"Vacancies"}),Object(i.jsx)("th",{children:"Actions"})]})}),Object(i.jsx)("tbody",{children:t.map((e=>Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)(k.b,{to:"/info/".concat(e.park_Id),style:{fontWeight:"bold",fontSize:"1.05em"},children:e.name})}),Object(i.jsx)("td",{children:Object(i.jsx)("span",{style:{color:"#555"},children:e.displayAddress})}),Object(i.jsx)("td",{children:Object(i.jsx)(_,{status:e.opening_status})}),Object(i.jsx)("td",{children:Object(i.jsx)(u.a,{bg:"success",style:{fontSize:"1em"},children:e["".concat(a,"_vacancy")]})}),Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[Object(i.jsx)(p.a,{variant:"info",size:"sm",onClick:()=>c(e),children:"Map"}),Object(i.jsx)(p.a,{variant:"link",size:"sm",onClick:()=>s(e.park_Id),title:n.includes(e.park_Id)?"Remove Favorite":"Add Favorite",children:n.includes(e.park_Id)?Object(i.jsx)(f.b,{style:{color:"#FFD700"}}):Object(i.jsx)(f.a,{style:{color:"#888"}})})]})})]},e.park_Id)))})]})}),Object(i.jsx)("div",{className:"d-md-none",children:Object(i.jsx)(y.a,{children:t.map((e=>Object(i.jsx)(y.a.Item,{children:Object(i.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(k.b,{to:"/info/".concat(e.park_Id),style:{fontWeight:"bold"},children:e.name}),Object(i.jsx)("p",{style:{margin:0,color:"#555",fontSize:"0.9em"},children:e.displayAddress}),Object(i.jsxs)("div",{children:[Object(i.jsx)(_,{status:e.opening_status})," ",Object(i.jsx)(u.a,{bg:"success",children:e["".concat(a,"_vacancy")]})]})]}),Object(i.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[Object(i.jsx)(p.a,{variant:"info",size:"sm",onClick:()=>c(e),children:"Map"}),Object(i.jsx)(p.a,{variant:"link",size:"sm",onClick:()=>s(e.park_Id),title:n.includes(e.park_Id)?"Remove Favorite":"Add Favorite",children:n.includes(e.park_Id)?Object(i.jsx)(f.b,{style:{color:"#FFD700"}}):Object(i.jsx)(f.a,{style:{color:"#888"}})})]})]})},e.park_Id)))})})]})}var S=function(){const[e,t]=Object(c.useState)([]),[a,s]=Object(c.useState)((()=>JSON.parse(localStorage.getItem("favorite_carparks")||"[]"))),[n,r]=Object(c.useState)((()=>localStorage.getItem("selected_vehicle_type")||"privateCar")),[l,o]=Object(c.useState)(!1),[g,y]=Object(c.useState)({}),[f,k]=Object(c.useState)(!0),[S,w]=Object(c.useState)("");Object(c.useEffect)((()=>{localStorage.setItem("selected_vehicle_type",n)}),[n]),Object(c.useEffect)((()=>{!async function(){k(!0);const[e,a]=await Promise.all([fetch("https://api.data.gov.hk/v1/carpark-info-vacancy"),fetch("https://api.data.gov.hk/v1/carpark-info-vacancy?data=vacancy&vehicleTypes=privateCar,motorCycle,LGV,HGV,coach&lang=en_US")]),c=await e.json(),s=await a.json(),n={};for(const t of s.results){var r,l,i,o,j;n[t.park_Id]={privateCar:(null===(r=t.privateCar)||void 0===r?void 0:r[0])||{},motorCycle:(null===(l=t.motorCycle)||void 0===l?void 0:l[0])||{},LGV:(null===(i=t.LGV)||void 0===i?void 0:i[0])||{},HGV:(null===(o=t.HGV)||void 0===o?void 0:o[0])||{},coach:(null===(j=t.coach)||void 0===j?void 0:j[0])||{}}}const b=c.results.map((e=>{const t=e.park_Id,a=n[t]||{},c=Object(d.a)(Object(d.a)({},e),{},{park_Id:t});for(const n of C.map((e=>e.value))){var s,r,l,i;c["".concat(n,"_vacancy")]=null!==(s=null===(r=a[n])||void 0===r?void 0:r.vacancy)&&void 0!==s?s:"N/A",c["".concat(n,"_vacancy_type")]=null!==(l=null===(i=a[n])||void 0===i?void 0:i.vacancy_type)&&void 0!==l?l:""}var o,j;e.privateCar&&e.privateCar.hourlyCharges?c.price=null!==(o=null===(j=e.privateCar.hourlyCharges[0])||void 0===j?void 0:j.price)&&void 0!==o?o:"N/A":c.price="N/A";return c}));t(b),k(!1)}()}),[]);const I=e=>{let t;t=a.includes(e)?a.filter((t=>t!==e)):[...a,e],s(t),localStorage.setItem("favorite_carparks",JSON.stringify(t))},L=e=>e.filter((e=>{if("OPEN"!==e.opening_status)return!1;const t=e["".concat(n,"_vacancy")];return!["N/A","none","-1","0"].includes(String(t))&&!(S&&!(e.name&&e.name.toLowerCase().includes(S.toLowerCase())||e.displayAddress&&e.displayAddress.toLowerCase().includes(S.toLowerCase())))})),A=L(e.filter((e=>a.includes(e.park_Id)))),F=L(e.filter((e=>!a.includes(e.park_Id)))),G=e=>{y(e),o(!0)};return Object(i.jsxs)(j.a,{className:"mt-5",children:[Object(i.jsx)("h1",{className:"text-center mb-4",children:"Parking Information"}),Object(i.jsxs)(b.a,{className:"mb-3",children:[Object(i.jsx)(h.a,{md:6,children:Object(i.jsxs)(O.a.Group,{children:[Object(i.jsx)(O.a.Label,{children:"Vehicle Type:"}),Object(i.jsx)(O.a.Select,{value:n,onChange:e=>r(e.target.value),children:C.map((e=>Object(i.jsx)("option",{value:e.value,children:e.label},e.value)))})]})}),Object(i.jsx)(h.a,{md:6,children:Object(i.jsxs)(O.a.Group,{children:[Object(i.jsx)(O.a.Label,{children:"Search (Name or Address):"}),Object(i.jsxs)(x.a,{children:[Object(i.jsx)(O.a.Control,{type:"text",placeholder:"Enter name or address",value:S,onChange:e=>w(e.target.value)}),S&&Object(i.jsx)(p.a,{variant:"outline-secondary",onClick:()=>w(""),children:"Clear"})]})]})})]}),f?Object(i.jsxs)("div",{className:"text-center my-5",children:[Object(i.jsx)(v.a,{animation:"border",role:"status",variant:"primary",style:{width:"3rem",height:"3rem"},children:Object(i.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(i.jsx)("div",{style:{marginTop:10,fontWeight:"bold",fontSize:"1.2em",letterSpacing:"2px",color:"#007bff",animation:"blinker 1s linear infinite"},children:"Loading..."}),Object(i.jsx)("style",{children:"\n              @keyframes blinker {\n                50% { opacity: 0.3; }\n              }\n            "})]}):Object(i.jsxs)(i.Fragment,{children:[A.length>0&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h2",{children:["Favorite Parking Lots ",Object(i.jsx)(u.a,{bg:"warning",children:A.length})]}),Object(i.jsx)(N,{carparks:A,vehicleType:n,onShowMap:G,onToggleFavorite:I,favorites:a})]}),Object(i.jsxs)("h2",{className:"mt-4",children:["All Parking Lots ",Object(i.jsx)(u.a,{bg:"info",children:F.length})]}),Object(i.jsx)(N,{carparks:F,vehicleType:n,onShowMap:G,onToggleFavorite:I,favorites:a}),A.length+F.length===0&&Object(i.jsx)("p",{className:"text-center text-danger font-weight-bold mt-4",children:"No results found. Please adjust the filter conditions or try again."})]}),Object(i.jsxs)(m.a,{show:l,onHide:()=>o(!1),size:"lg",centered:!0,children:[Object(i.jsx)(m.a.Header,{closeButton:!0,children:Object(i.jsx)(m.a.Title,{children:"Carpark Location"})}),Object(i.jsxs)(m.a.Body,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("strong",{children:"Name:"})," ",g.name,Object(i.jsx)("br",{}),Object(i.jsx)("strong",{children:"Address:"})," ",g.displayAddress,Object(i.jsx)("br",{}),Object(i.jsx)("strong",{children:"Status:"})," ",Object(i.jsx)(_,{status:g.opening_status}),Object(i.jsx)("br",{}),Object(i.jsx)("strong",{children:"Vacancy:"})," ",g["".concat(n,"_vacancy")]]}),Object(i.jsx)("iframe",{id:"map",title:"Google Map",src:g.latitude&&g.longitude?"https://www.google.com/maps?q=".concat(g.latitude,",").concat(g.longitude,"&output=embed"):"",width:"100%",height:"350",style:{border:0,marginTop:10},allowFullScreen:"",loading:"lazy"})]})]})]})};var w=()=>Object(i.jsx)("footer",{className:"bg-light text-center text-lg-start",children:Object(i.jsx)(j.a,{className:"p-4",children:Object(i.jsx)(b.a,{children:Object(i.jsx)(h.a,{children:Object(i.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," Your Company Name. All rights reserved."]})})})})});a(77);var I=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(o,{}),Object(i.jsx)(S,{}),Object(i.jsx)(w,{})]})};n.a.render(Object(i.jsx)(k.a,{children:Object(i.jsx)(I,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.0c5c936e.chunk.js.map